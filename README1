ğŸ‘“ OptiVision â€” Plataforma de Venta de Lentes en LÃ­nea

Next.js Â· Supabase Â· Tailwind Â· Vercel Â· Raya Â· Estado

Plataforma e-commerce fullstack para venta de armazones y lentes Ã³pticos en Guatemala.
CatÃ¡logo con filtros, agendamiento de citas, pagos con Neonet y Credomatic, y probador virtual con inteligencia artificial.

Ver demostraciÃ³n
 Â· Reportar error
 Â· Solicitar funciÃ³n

ğŸ“‹ Tabla de Contenidos

Sobre el Proyecto

Funcionalidades

Pila tecnolÃ³gica

Arquitectura

Base de datos

Pasarela de Pago

Probador Virtual

InstalaciÃ³n

Variables de Entorno

Estructura del Proyecto

Flujo de Usuario

Hoja de Ruta

Autor

ğŸ”­ Sobre el Proyecto

OptiVision es una plataforma de comercio electrÃ³nico especializada en venta de armazones y lentes Ã³pticos. Combina una experiencia de compra moderna con funcionalidades Ãºnicas como:

Probador virtual de lentes usando IA

Agendamiento de citas para exÃ¡menes visuales

IntegraciÃ³n con pasarelas de pago locales (Neonet y Credomatic)

Objetivo: Resolver la falta de presencia digital de Ã³pticas en Guatemala, permitiendo explorar catÃ¡logos grandes, probar lentes virtualmente y pagar en lÃ­nea de manera segura.

âœ¨ Funcionalidades
MÃ³dulo de CatÃ¡logo

Filtros: estilo, material, gÃ©nero, marca, rango de precio

Vista grid / lista

Scroll infinito

BÃºsqueda en tiempo real

MÃ³dulo de Producto

GalerÃ­a de imÃ¡genes mÃºltiples

Selector de color con vista previa

Probador virtual (cÃ¡mara o foto)

Productos relacionados

MÃ³dulo Carrito y Checkout

Carrito persistente (localStorage + DB)

AplicaciÃ³n de cupones de descuento

Resumen con IVA 12%

Checkout en un solo paso

MÃ³dulo de Pagos

IntegraciÃ³n Neonet y Credomatic

Webhooks para confirmar pagos

Manejo de estados: pendiente / aprobado / rechazado / error

MÃ³dulo de Citas

Calendario interactivo con disponibilidad real

SelecciÃ³n de sucursal con mapa

ConfirmaciÃ³n por email

Recordatorio 24h antes por WhatsApp (Twilio)

MÃ³dulo de Cuenta

Historial de pedidos y citas

GestiÃ³n de datos personales

AutenticaciÃ³n con correo o Google (Supabase Auth)

ğŸ› ï¸ Pila tecnolÃ³gica
Ãrea	TecnologÃ­a	Uso
Frontend	Next.js 14	SSR, rutas dinÃ¡micas, React Server Components
	React 18	Componentes UI
	Tailwind CSS 3.4	Estilos y diseÃ±o responsivo
	Framer Motion 11	Animaciones y transiciones
	Zustand 4	Estado global (carrito)
Backend / API	Next.js API Routes	Pagos, webhooks, citas, productos
	Supabase	PostgreSQL, Auth, Storage
	Twilio	Recordatorios WhatsApp
	Resend	Emails transaccionales
Pagos	Credomatic / VisaNet	Tarjetas de Guatemala
	Neonet	Pasarela local
	Raya	Pagos internacionales (backup)
Probador Virtual	MediaPipe Face Mesh	DetecciÃ³n facial en tiempo real
	TensorFlow.js	Modelos IA en navegador
	face-api.js	DetecciÃ³n facial en foto estÃ¡tica
	Canvas API	Renderizado de lentes sobre rostro
DevOps / Hosting	Vercel	Frontend, CI/CD automÃ¡tico
	Supabase	DB y storage
	GitHub Actions	CI/CD pipeline
ğŸ— Arquitectura
CLIENTE (Browser)
Next.js Â· Tailwind Â· Zustand
        â”‚ HTTPS
        â–¼
VERCEL (Edge Network)
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  App Router   â”‚    â”‚  API Routes      â”‚
  â”‚  / /catalogo  â”‚    â”‚ /api/payment     â”‚
  â”‚  /producto    â”‚    â”‚ /api/webhooks    â”‚
  â”‚  /carrito     â”‚    â”‚ /api/appointmentsâ”‚
  â”‚  /checkout    â”‚    â”‚ /api/products    â”‚
  â”‚  /citas       â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
SUPABASE (PostgreSQL, Auth, Storage)
        â”‚
Pagos: Credomatic / Neonet
Servicios externos: Resend, Twilio, Google Maps
ğŸ—„ï¸ Base de Datos

Tablas principales:

users

categories

products

appointments

orders

order_items

coupons

Relaciones:

users â”€â”€ orders â”€â”€ order_items â”€â”€ products
      â””â”€ appointments
products â”€â”€ categories

(Cada producto tiene imÃ¡genes y colores en JSONB, y un PNG de armazÃ³n para probador virtual)

ğŸ’³ Pasarela de Pago

Flujo general:

Usuario confirma pedido â†’ /api/payment/create

Servidor genera referencia OV-{orderId}-{timestamp}

Redirige a portal del banco (Credomatic / Neonet)

Webhook /api/webhooks/payment confirma el estado:

paid: stock descontado, email enviado

payment_failed: usuario notificado

ğŸ”‘ La confirmaciÃ³n del webhook es la fuente de verdad.

ğŸ•¶ï¸ Probador Virtual

Funcionamiento:

Detecta 468 puntos del rostro con MediaPipe Face Mesh

Calcula posiciÃ³n, tamaÃ±o e inclinaciÃ³n de lentes PNG

Renderiza en Canvas API cada frame

Modos:

ğŸ“· CÃ¡mara en vivo â€” 30fps

ğŸ–¼ï¸ Subir foto â€” detecciÃ³n facial offline

Requisito: Cada producto debe tener try_on_image.png fondo transparente.

ğŸš€ InstalaciÃ³n

Requisitos:

Node.js 18+

npm / yarn

Cuenta en Supabase

Cuenta en Vercel

Pasos:

# 1. Clonar repositorio
git clone https://github.com/eddisonjl/optivision.git
cd optivision

# 2. Instalar dependencias
npm install

# 3. Configurar variables de entorno
cp .env.example .env.local
# Editar .env.local con tus credenciales

# 4. Configurar base de datos
# Ir a Supabase â†’ SQL Editor â†’ pegar /database/schema.sql

# 5. Ejecutar en desarrollo
npm run dev
# Abrir en: http://localhost:3000
ğŸ” Variables de Entorno

Supabase: URL, ANON_KEY, SERVICE_ROLE_KEY

Credomatic / Neonet: access_key, secret, merchant_id

Emails: RESEND_API_KEY

WhatsApp: TWILIO_ACCOUNT_SID, AUTH_TOKEN, FROM

App: NEXT_PUBLIC_URL

âš ï¸ Nunca subir .env.local a GitHub.

ğŸ“ Estructura del Proyecto
optivision/
â”œâ”€â”€ app/                  # Next.js App Router
â”‚   â”œâ”€â”€ (public)/         # PÃ¡ginas principales
â”‚   â”œâ”€â”€ (auth)/           # Login y cuenta
â”‚   â””â”€â”€ api/              # Rutas backend
â”œâ”€â”€ components/           # Componentes UI y funcionales
â”œâ”€â”€ lib/                  # Clientes y utilidades (Supabase, pagos, emails)
â”œâ”€â”€ store/                # Estado global (Zustand)
â”œâ”€â”€ database/             # Schema SQL
â”œâ”€â”€ public/glasses/       # PNGs para probador
â”œâ”€â”€ .env.example
â”œâ”€â”€ .gitignore
â”œâ”€â”€ next.config.js
â”œâ”€â”€ tailwind.config.js
â””â”€â”€ package.json
ğŸ”„ Flujo de Usuario
Compra:

Home â†’ CatÃ¡logo â†’ Producto â†’ Probador â†’ Carrito â†’ Checkout â†’ Pago â†’ ConfirmaciÃ³n â†’ Rastreo pedido

Cita:

NavBar "Agendar cita" â†’ Selecciona sucursal â†’ Fecha/Hora â†’ Datos â†’ ConfirmaciÃ³n â†’ WhatsApp 24h

ğŸ”® Hoja de Ruta

Arquitectura y DB

DiseÃ±o de flujos de usuario

IntegraciÃ³n pasarelas GT (Neonet + Credomatic)

Probador virtual MediaPipe

Frontend Next.js + Tailwind

Supabase (DB + Storage)

MÃ³dulo citas con calendario

Emails transaccionales (Resend)

WhatsApp (Twilio)

Deploy en Vercel

Panel admin / App mÃ³vil (React Native)

ğŸ‘¨â€ğŸ’» Autor

Eddison Jocol â€” Fullstack Developer Â· Guatemala ğŸ‡¬ğŸ‡¹

GitHub

ğŸ“„ Licencia

MIT
